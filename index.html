<!DOCTYPE html>
<html lang="zn-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>歡迎光臨~傳說對決</title>
</head>

<style>
    body {
        margin: 0;
        padding: 0;
    }

    * {
        box-sizing: border-box;
    }


    #section1 {
        width: 100%;
        height: 100vh;
        position: relative;
    }

    @keyframes showit {
        from {
            opacity: 0.3;
        }

        to {
            opacity: 1;
        }
    }

    @keyframes fadeout {
        from {
            opacity: 1;
        }

        to {
            opacity: 0;
        }
    }

    #player {
        width: 100%;
        height: 100%;
        animation-name: fadeout;
        animation-duration: 4s;
        animation-delay: 1s;
        animation-fill-mode: forwards;
        position: absolute;
        top: 0;
        left: 0;
        z-index: 2;
    }

    .pic {
        width: 100%;
        height: 100%;
        /* background-image: url(img/open5.jpg); */
        /* 之後問老師怎麼換照片，再改回 */
        background-position: center;
        /* 原cover暫用contain */
        background-size: cover;
        /* background-repeat: no-repeat; */
        animation-name: showit;
        animation-duration: 4s;
        animation-delay: 4.5s;
        position: absolute;
        top: 0;
        left: 0;
        z-index: 1;
        opacity: 0;
        animation-fill-mode: forwards;
    }

    @media (max-width:768px) {
        .pic {
            background-size: contain;
            background-repeat: no-repeat;

        }
    }
</style>

<body>

    <section id="section1">
        <div id="player"></div>
        <div class="pic" style="background-image: url(img/open5.jpg);"></div>
    </section>

    <section id="section2">

    </section>


    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

    <script>

        var tag = document.createElement('script');

        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // 3. This function creates an <iframe> (and YouTube player)
        //    after the API code downloads.
        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '100%',
                width: '100%',
                videoId: 'cqHn-QtCzZ0',
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': function (event) {
                        if (event.data == YT.PlayerState.ENDED) {
                            // console.log("結束了");
                            var pic = document.querySelector('.pic')
                            setTimeout(function () {
                                pic.setAttribute("style", "background-image: url(img/open0.jpg);");
                            }, 1000);

                        }
                    }
                },
                playerVars: {
                    autoplay: 1,
                    mute: 1,
                    controls: 0,
                    loop: 1,
                    modestbranding: 1
                }
            });
        }

        // 4. The API will call this function when the video player is ready.
        function onPlayerReady(event) {
            event.target.playVideo();
        }


    </script>
</body>

</html>